<h2>Регистрация</h2>
<form class="form" [formGroup]="form">
  <div class="form-group">
    <label for="email">Почта:</label>
    <input
      type="email"
      class="form-control"
      id="email"
      placeholder="Введите почту..."
      formControlName="email"
    >
    <div
      class="validator"
      *ngIf="login && (login.touched || login.dirty)"
    >
      <small class="form-error">
        {{login.errors?.required ? 'Почта обязательна' : ''}}
        {{login.errors?.email ? 'Неправильный формат почты' : ''}}
      </small>
    </div>
  </div>
  <div class="form-group" [formGroup]="passwordsGroup">
    <label for="password">Пароль:</label>
    <input
      type="password"
      class="form-control"
      id="password"
      placeholder="Введите пароль..."
      formControlName="password"
    >
    <div
      class="validator"
      *ngIf="password && (password.touched || password.dirty)"
    >
      <small class="form-error">
        {{password.controls.password.errors?.required ? 'Пароль обязателен' : ''
        || password.controls.password.errors?.minlength ? 'Пароль должен быть не менее 6 символов' : ''}}
      </small>
    </div>
  </div>
  <div class="form-group" [formGroup]="passwordsGroup">
    <label for="repeat">Повторите пароль:</label>
    <input
      type="password"
      class="form-control"
      id="repeat"
      placeholder="Введите пароль..."
      formControlName="repeat"
    >
    <div
      class="validator"
      *ngIf="password && (password.touched || password.dirty)"
    >
      <small class="form-error">
        {{password.controls.repeat.errors?.required ? 'Пароль обязателен' : ''
        || password.controls.repeat.errors?.minlength ? 'Пароль должен быть не менее 6 символов' : ''
        || password.errors?.mismatch ? 'Введенные пароли не совпадают' : ''}}
      </small>
    </div>
  </div>
  <div class="form-group">
    <button
      type="submit"
      mat-flat-button
      color="primary"
      (click)="submit()"
      [disabled]="loading || form.invalid || passwordsGroup.invalid"
    >
      Зарегистрироваться
    </button>
  </div>
</form>
